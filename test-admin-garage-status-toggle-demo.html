<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Garage Status Toggle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .test-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 1000px;
            margin: 0 auto;
        }
        .test-title {
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: bold;
            text-align: center;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            background: #f9fafb;
        }
        .test-section h3 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 600;
        }
        .test-button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            text-decoration: none;
            display: inline-block;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        .test-button.success {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        .test-button.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        .test-result {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            font-weight: 500;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .test-success {
            background: #ecfdf5;
            color: #059669;
            border: 1px solid #a7f3d0;
        }
        .test-info {
            background: #eff6ff;
            color: #1d4ed8;
            border: 1px solid #93c5fd;
        }
        .test-warning {
            background: #fffbeb;
            color: #d97706;
            border: 1px solid #fcd34d;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #d1d5db;
            background: white;
        }
        .feature-card h4 {
            margin-bottom: 10px;
            font-weight: 600;
            color: #374151;
        }
        .feature-card.success {
            border-color: #10b981;
            background: #f0fdf4;
        }
        .feature-card.warning {
            border-color: #f59e0b;
            background: #fffbeb;
        }
        .feature-card.danger {
            border-color: #ef4444;
            background: #fef2f2;
        }
        .status-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border: 1px solid #d1d5db;
        }
        .status-item {
            text-align: center;
            flex: 1;
        }
        .status-item.active {
            color: #10b981;
        }
        .status-item.inactive {
            color: #ef4444;
        }
        .arrow {
            font-size: 24px;
            color: #6b7280;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">üîÑ Test Admin Garage Status Toggle</h1>
        
        <div class="test-section">
            <h3>üìã T√≠nh nƒÉng ƒë√£ c·∫≠p nh·∫≠t</h3>
            
            <div class="feature-grid">
                <div class="feature-card success">
                    <h4>‚úÖ T·∫°m ng∆∞ng Garage</h4>
                    <p>Admin c√≥ th·ªÉ t·∫°m ng∆∞ng garage ACTIVE v·ªõi l√Ω do chi ti·∫øt.</p>
                </div>
                
                <div class="feature-card success">
                    <h4>‚úÖ K√≠ch ho·∫°t l·∫°i Garage</h4>
                    <p>Admin c√≥ th·ªÉ k√≠ch ho·∫°t l·∫°i garage INACTIVE m·ªôt c√°ch d·ªÖ d√†ng.</p>
                </div>
                
                <div class="feature-card success">
                    <h4>‚úÖ Notification System</h4>
                    <p>Ch·ªß garage nh·∫≠n th√¥ng b√°o khi status thay ƒë·ªïi.</p>
                </div>
                
                <div class="feature-card success">
                    <h4>‚úÖ UI/UX T·ªëi ∆∞u</h4>
                    <p>N√∫t hi·ªÉn th·ªã theo status v·ªõi loading state v√† m√†u s·∫Øc ph√π h·ª£p.</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>üîÑ Garage Status Flow</h3>
            
            <div class="status-flow">
                <div class="status-item active">
                    <div style="font-size: 24px; margin-bottom: 8px;">üü¢</div>
                    <strong>ACTIVE</strong>
                    <div style="font-size: 12px; color: #6b7280;">Garage ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng</div>
                </div>
                
                <div class="arrow">‚è∏Ô∏è</div>
                
                <div class="status-item inactive">
                    <div style="font-size: 24px; margin-bottom: 8px;">üî¥</div>
                    <strong>INACTIVE</strong>
                    <div style="font-size: 12px; color: #6b7280;">Garage b·ªã t·∫°m ng∆∞ng</div>
                </div>
                
                <div class="arrow">‚ñ∂Ô∏è</div>
                
                <div class="status-item active">
                    <div style="font-size: 24px; margin-bottom: 8px;">üü¢</div>
                    <strong>ACTIVE</strong>
                    <div style="font-size: 12px; color: #6b7280;">Garage ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>üß™ Test Admin Garage Management</h3>
            <p>Ki·ªÉm tra ch·ª©c nƒÉng toggle status garage c·ªßa admin:</p>
            
            <div style="text-align: center; margin: 20px 0;">
                <a href="http://localhost:3000/admin/garages" class="test-button">Test Admin Garage Management</a>
            </div>
            
            <div class="test-result test-info">
                <strong>Ki·ªÉm tra c·∫ßn th·ª±c hi·ªán:</strong>

                1. <strong>Test T·∫°m ng∆∞ng Garage (ACTIVE ‚Üí INACTIVE):</strong>
                   - T√¨m garage c√≥ status "Ho·∫°t ƒë·ªông" (ACTIVE)
                   - Click dropdown menu (3 ch·∫•m)
                   - Ch·ªçn "T·∫°m ng∆∞ng ho·∫°t ƒë·ªông"
                   - Nh·∫≠p l√Ω do trong modal
                   - Click "T·∫°m ng∆∞ng"
                   - Ki·ªÉm tra: Status chuy·ªÉn th√†nh "B·ªã kh√≥a" + hi·ªÉn th·ªã l√Ω do

                2. <strong>Test K√≠ch ho·∫°t l·∫°i Garage (INACTIVE ‚Üí ACTIVE):</strong>
                   - T√¨m garage c√≥ status "B·ªã kh√≥a" (INACTIVE)
                   - Click dropdown menu (3 ch·∫•m)
                   - Ch·ªçn "K√≠ch ho·∫°t l·∫°i" (m√†u xanh l√°)
                   - Click ƒë·ªÉ x√°c nh·∫≠n
                   - Ki·ªÉm tra: Status chuy·ªÉn th√†nh "Ho·∫°t ƒë·ªông"

                3. <strong>Test UI/UX:</strong>
                   - N√∫t "T·∫°m ng∆∞ng ho·∫°t ƒë·ªông" ch·ªâ hi·ªán v·ªõi garage ACTIVE (m√†u ƒë·ªè)
                   - N√∫t "K√≠ch ho·∫°t l·∫°i" ch·ªâ hi·ªán v·ªõi garage INACTIVE (m√†u xanh)
                   - Loading state khi ƒëang x·ª≠ l√Ω
                   - Toast notification khi th√†nh c√¥ng

                4. <strong>Test Notification:</strong>
                   - Ch·ªß garage nh·∫≠n notification khi b·ªã t·∫°m ng∆∞ng
                   - Ch·ªß garage nh·∫≠n notification khi ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i
            </div>
        </div>

        <div class="test-section">
            <h3>üé® UI/UX Features</h3>
            <div class="test-result test-success">
                <strong>UI/UX Improvements:</strong>

                1. <strong>Conditional Buttons:</strong>
                   - ACTIVE garage: Hi·ªÉn th·ªã n√∫t "T·∫°m ng∆∞ng ho·∫°t ƒë·ªông" (m√†u ƒë·ªè)
                   - INACTIVE garage: Hi·ªÉn th·ªã n√∫t "K√≠ch ho·∫°t l·∫°i" (m√†u xanh)
                   - PENDING garage: Ch·ªâ hi·ªÉn th·ªã n√∫t "Ph√™ duy·ªát"

                2. <strong>Visual Indicators:</strong>
                   - Icon Pause (‚è∏Ô∏è) cho t·∫°m ng∆∞ng
                   - Icon Play (‚ñ∂Ô∏è) cho k√≠ch ho·∫°t
                   - Loading spinner khi ƒëang x·ª≠ l√Ω
                   - M√†u s·∫Øc ph√π h·ª£p v·ªõi action

                3. <strong>User Feedback:</strong>
                   - Toast notification v·ªõi t√™n garage
                   - Loading state trong dropdown
                   - Error handling v·ªõi th√¥ng b√°o r√µ r√†ng
                   - Auto refresh danh s√°ch sau khi thao t√°c

                4. <strong>Status Display:</strong>
                   - Badge m√†u s·∫Øc theo status
                   - Hi·ªÉn th·ªã l√Ω do t·∫°m ng∆∞ng d∆∞·ªõi status
                   - Layout responsive v√† d·ªÖ ƒë·ªçc
            </div>
        </div>

        <div class="test-section">
            <h3>üîß Technical Implementation</h3>
            <div class="test-result test-success">
                <strong>Code Changes:</strong>

                1. <strong>Frontend (admin/garages/page.tsx):</strong>
                   - Import Play icon t·ª´ lucide-react
                   - Th√™m state: activatingGarage
                   - Th√™m function: handleActivateGarage()
                   - Th√™m conditional rendering cho n√∫t "K√≠ch ho·∫°t l·∫°i"
                   - Loading state v√† error handling

                2. <strong>Backend (GarageServiceImpl.java):</strong>
                   - updateGarageStatusByAdmin() ƒë√£ c√≥ s·∫µn
                   - G·ª≠i notification GARAGE_REACTIVATED khi k√≠ch ho·∫°t l·∫°i
                   - G·ª≠i notification GARAGE_SUSPENDED khi t·∫°m ng∆∞ng

                3. <strong>API Integration:</strong>
                   - S·ª≠ d·ª•ng updateGarageStatus() t·ª´ AdminApi
                   - Status: "ACTIVE" ho·∫∑c "INACTIVE"
                   - rejectionReason: undefined khi k√≠ch ho·∫°t l·∫°i

                <strong>Business Logic:</strong>
                - Ch·ªâ admin m·ªõi c√≥ quy·ªÅn thay ƒë·ªïi status
                - Garage INACTIVE kh√¥ng nh·∫≠n l·ªãch h·∫πn m·ªõi
                - Garage ACTIVE c√≥ th·ªÉ nh·∫≠n l·ªãch h·∫πn b√¨nh th∆∞·ªùng
                - Notification ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông
                - L√Ω do t·∫°m ng∆∞ng ƒë∆∞·ª£c l∆∞u v√† hi·ªÉn th·ªã
            </div>
        </div>

        <div class="test-section">
            <h3>üì± User Experience Flow</h3>
            <div class="test-result test-info">
                <strong>Admin Experience:</strong>

                1. <strong>T·∫°m ng∆∞ng Garage:</strong>
                   - Admin th·∫•y garage ACTIVE
                   - Click dropdown ‚Üí "T·∫°m ng∆∞ng ho·∫°t ƒë·ªông"
                   - Nh·∫≠p l√Ω do ‚Üí Click "T·∫°m ng∆∞ng"
                   - Garage chuy·ªÉn th√†nh INACTIVE + hi·ªÉn th·ªã l√Ω do

                2. <strong>K√≠ch ho·∫°t l·∫°i Garage:</strong>
                   - Admin th·∫•y garage INACTIVE
                   - Click dropdown ‚Üí "K√≠ch ho·∫°t l·∫°i"
                   - Click ƒë·ªÉ x√°c nh·∫≠n (kh√¥ng c·∫ßn l√Ω do)
                   - Garage chuy·ªÉn th√†nh ACTIVE

                <strong>Garage Owner Experience:</strong>

                1. <strong>Khi b·ªã t·∫°m ng∆∞ng:</strong>
                   - Nh·∫≠n notification "Garage b·ªã t·∫°m ng∆∞ng"
                   - Xem l√Ω do t·∫°m ng∆∞ng
                   - Li√™n h·ªá admin ƒë·ªÉ gi·∫£i quy·∫øt

                2. <strong>Khi ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i:</strong>
                   - Nh·∫≠n notification "Garage ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i"
                   - Garage ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng
                   - C√≥ th·ªÉ nh·∫≠n l·ªãch h·∫πn m·ªõi
            </div>
        </div>

        <div class="test-section">
            <h3>‚úÖ Expected Results</h3>
            <div class="test-result test-success">
                <strong>K·∫øt qu·∫£ mong ƒë·ª£i:</strong>

                1. <strong>Admin c√≥ th·ªÉ:</strong>
                   - T·∫°m ng∆∞ng garage ACTIVE v·ªõi l√Ω do
                   - K√≠ch ho·∫°t l·∫°i garage INACTIVE
                   - Xem l√Ω do t·∫°m ng∆∞ng trong danh s√°ch
                   - Nh·∫≠n feedback ngay l·∫≠p t·ª©c

                2. <strong>Garage Owner nh·∫≠n:</strong>
                   - Notification khi b·ªã t·∫°m ng∆∞ng
                   - Notification khi ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i
                   - Th√¥ng tin l√Ω do t·∫°m ng∆∞ng
                   - Link ƒë·∫øn trang garage details

                3. <strong>System ho·∫°t ƒë·ªông:</strong>
                   - Status thay ƒë·ªïi ch√≠nh x√°c
                   - Notification g·ª≠i ƒë√∫ng th·ªùi ƒëi·ªÉm
                   - UI c·∫≠p nh·∫≠t real-time
                   - Data consistency ƒë∆∞·ª£c ƒë·∫£m b·∫£o

                4. <strong>Security & Validation:</strong>
                   - Ch·ªâ admin m·ªõi c√≥ quy·ªÅn
                   - Input validation ƒë·∫ßy ƒë·ªß
                   - Error handling an to√†n
                   - Audit trail cho m·ªçi thay ƒë·ªïi
            </div>
        </div>
    </div>

    <script>
        // Auto test
        function testGarageStatusToggle() {
            console.log('üîÑ Testing garage status toggle feature...');
            
            // Test current URL
            const currentUrl = window.location.href;
            console.log('Current URL:', currentUrl);
            
            // Check if we're on admin garages page
            if (currentUrl.includes('/admin/garages')) {
                console.log('‚úÖ On Admin Garage Management page - checking for status toggle buttons...');
                
                // Look for inactive button (for ACTIVE garages)
                const inactiveButton = document.querySelector('button:has(span:contains("T·∫°m ng∆∞ng ho·∫°t ƒë·ªông"))');
                if (inactiveButton) {
                    console.log('‚úÖ Inactive button found');
                } else {
                    console.log('‚ÑπÔ∏è Inactive button not found (no ACTIVE garages or not visible)');
                }
                
                // Look for activate button (for INACTIVE garages)
                const activateButton = document.querySelector('button:has(span:contains("K√≠ch ho·∫°t l·∫°i"))');
                if (activateButton) {
                    console.log('‚úÖ Activate button found');
                } else {
                    console.log('‚ÑπÔ∏è Activate button not found (no INACTIVE garages or not visible)');
                }
                
                // Check for status badges
                const statusBadges = document.querySelectorAll('[class*="badge"]');
                console.log(`Found ${statusBadges.length} status badges`);
            }
        }
        
        // Run test on load
        setTimeout(testGarageStatusToggle, 1000);
    </script>
</body>
</html>
